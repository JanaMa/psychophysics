function GratingDemo% GratingDemo shows how to use WhiteIndex, BlackIndex, and 'PutImage' to% display a grating of known contrast at any orientation and pixelSize.%% See also DriftDemo, EpsDemo.% 07/01/99  dgp Arbitrary orientation% 12/10/01  awi Added font conditional% 02/21/02  dgp Mention DriftDemo.% 04/03/02  awi Merged OS9 and Win versions, which had fallen out of sync. % 4/13/02   dgp Use Arial, eliminating need for conditional% 7/15/03   dgp Added comments explaining f and lambda.% windowwhichScreen=0;window=Screen(whichScreen,'OpenWindow');white=WhiteIndex(window);black=BlackIndex(window);gray=(white+black)/2;if round(gray)==white	gray=black;endinc=white-gray;Screen(window,'FillRect',gray);% grating[x,y]=meshgrid(-100:100,-100:100);orientation=17; % tilt (deg)f=0.03; % spatial frequency (cycles/pixel)lambda=1.5/f; % gaussian space constant (pixels); "1.5/f" yields 1.5 cyclea=cos(orientation*pi/180)*2*pi*f;b=sin(orientation*pi/180)*2*pi*f;m=exp(-((x/lambda).^2)-((y/lambda).^2)).*sin(a*x+b*y);Screen(window,'PutImage',gray+inc*m);% pauseScreen(window,'TextFont','Arial');Screen(window,'TextSize',18);Ask(window,'Done. Hit return to quit.',black,gray,'GetString');Screen(window,'Close');