function time=geteyelinktime(el, maxwait)% USAGE: time=geteyelinktime(el [, maxwait])% get tracker time% el: is eyelinkdefault structure% maxwait: specifies maximum time to wait for a tracker time event%% history% 28-10-02	fwc created it, based on 'EXGetEyeLinkTime.m' of jp%time=-1;if ~exist('maxwait', 'var') | isempty(maxwait) | maxwait <= 0	usemaxwait=1;else	usemaxwait=0; % do not timeoutend% get Eyelink time for display onstart=getsecs;if eyelink('isconnected') == el.connected % readtime doesn't work in dummymode	if EYELINK('requesttime') ~= 0			% request time over network		error('geteyelinktime: requesttime error');	end;	while time == -1 & (usemaxwait==1 & getsecs-start<maxwait)	% repeat until available or timeout		if eyelink('isconnected') == el.notconnected			error('geteyelinktime: lost connection during readtime request');		end		time = EYELINK('readtime');		endend