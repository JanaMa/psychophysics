function e = GloLoDirection(varargin)
    params = namedargs...
        ( 'dummy',      1  ...
        , 'skipFrames', 1  ...
        , 'requireCalibration', 0 ...
        , 'priority', 9 ...
        , 'hideCursor', 0 ...
        , 'diagnostics', 0 ...
        );
    params = namedargs(params, varargin{:});
    
    e = Experiment...
        ( 'continuing', 0 ...
        , 'trials', GloLoDirectionTrialGenerator...
            ( 'base', GloLoDirectionTrial...
                ( 'cueOnset', 1 ...
                , 'cwResponseKey', 'x' ...
                , 'ccwResponseKey', 'z' ...
                , 'fixationPointSize', 0.1 ...
                , 'cueSize', 0.1 ...
                , 'cueLocation', [0 0] ... %must specify this manually.
                , 'cueDuration', 0.1 ...
                , 'patch', CauchyPatch ...
                    ( 'size', [1/2 0.5 0.1] ...
                    , 'velocity', 5 ... 
                    ) ...
                , 'motion', CircularMotionProcess...
                    ( 'radius', 8 ...
                    , 'n', 3 ...
                    , 't', 1 ...
                    , 'phase', 0 ...
                    , 'dt', 0.15 ...
                    , 'dphase', 0.75 / 10 ... %dx = 0.75...
                    , 'angle', 90 ...
                    , 'color', [0.25;0.25;0.25] ...
                    )...
                )...
            , 'blocksize', 100 ...
            , 'factors', struct...
                ( 'nTargets', [1 2 3 4 5] ...
                , 'cueOnsetAsynchrony' , [-0.30 : 0.075 : 0.45] ... %two flashes before, one after, space by half a flash
                , 'minOnset', 0.5 ...
                , 'onsetRate', 2 ...
                , 'minGapAtCue', 2*pi/6 ...
                , 'targetGlobal', [1 -1] ...
                , 'targetLocal', [1 -1] ...
                , 'cueRadius', 0.2 ...
                , 'replicate', [1 1 1 1 1] ... %every condition five times
                ) ...
            ) ...
        , params);
    
    e.run();
end